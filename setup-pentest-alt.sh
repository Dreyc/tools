#!/bin/bash

set -e

echo "📦 Installation des outils de pentest non disponibles via APT..."

# === Nikto ===
if [ ! -d /opt/nikto ]; then
  echo "🔍 Installation de Nikto..."
  sudo git clone https://github.com/sullo/nikto.git /opt/nikto
  sudo ln -sf /opt/nikto/program/nikto.pl /usr/local/bin/nikto
fi

# === Enum4linux-ng ===
if [ ! -d /opt/enum4linux-ng ]; then
  echo "🧠 Installation de enum4linux-ng..."
  sudo git clone https://github.com/cddmp/enum4linux-ng.git /opt/enum4linux-ng
  sudo ln -sf /opt/enum4linux-ng/enum4linux-ng.py /usr/local/bin/enum4linux
fi

# === Metasploit ===
if ! command -v msfconsole &> /dev/null; then
  echo "💥 Installation de Metasploit Framework..."
  curl https://raw.githubusercontent.com/rapid7/metasploit-framework/master/msfinstall | sudo bash
fi

# === ExploitDB + searchsploit ===
if [ ! -d /opt/exploitdb ]; then
  echo "📚 Installation de ExploitDB..."
  sudo git clone https://github.com/offensive-security/exploitdb.git /opt/exploitdb
  sudo ln -sf /opt/exploitdb/searchsploit /usr/local/bin/searchsploit
fi

# === Radare2 ===
if ! command -v r2 &> /dev/null; then
  echo "🧬 Installation de Radare2..."
  git clone https://github.com/radareorg/radare2.git
  cd radare2
  ./sys/install.sh
  cd ..
  rm -rf radare2
fi

echo "✅ Tous les outils non-APT ont été installés avec succès."
